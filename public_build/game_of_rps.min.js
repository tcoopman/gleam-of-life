var c=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},D=class{static fromArray(t,r){let n=r||new Ne;for(let i=t.length-1;i>=0;--i)n=new fe(t[i],n);return n}[Symbol.iterator](){return new lt(this)}toArray(){return[...this]}atLeastLength(t){for(let r of this){if(t<=0)return!0;t--}return t<=0}hasLength(t){for(let r of this){if(t<=0)return!1;t--}return t===0}countLength(){let t=0;for(let r of this)t++;return t}};function d(e,t){return new fe(e,t)}function l(e,t){return D.fromArray(e,t)}var lt=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof Ne)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},Ne=class extends D{},fe=class extends D{constructor(t,r){super(),this.head=t,this.tail=r}};var ce=class e extends c{static isResult(t){return t instanceof e}},m=class extends ce{constructor(t){super(),this[0]=t}isOk(){return!0}},_=class extends ce{constructor(t){super(),this[0]=t}isOk(){return!1}};function p(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!Wt(n)||!Wt(i)||!Hr(n,i)||Dr(n,i)||Ur(n,i)||Pr(n,i)||Wr(n,i)||Rr(n,i)||Gr(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[u,f]=Mr(n);for(let a of u(n))r.push(f(n,a),f(i,a))}return!0}function Mr(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function Dr(e,t){return e instanceof Date&&(e>t||e<t)}function Ur(e,t){return e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function Pr(e,t){return Array.isArray(e)&&e.length!==t.length}function Wr(e,t){return e instanceof Map&&e.size!==t.size}function Rr(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function Gr(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function Wt(e){return typeof e=="object"&&e!==null}function Hr(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function ze(e,t,r,n,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=r,o.fn=n;for(let u in s)o[u]=s[u];return o}var T=class extends c{constructor(t){super(),this[0]=t}},I=class extends c{};var R=class extends c{},F=class extends c{},B=class extends c{};function Se(e){return e>=0?e:e*-1}function Ie(e,t){return e===t?new F:e<t?new R:new B}function Ht(e,t){return e.isOk()?e[0]:t}function at(e){return dt(e)}function pt(e){return e}function ae(e){return e}function Jt(e,t){return Yt(e,t)}function pe(e){return e}var Vt=new WeakMap,_t=new DataView(new ArrayBuffer(8)),xt=0;function ht(e){let t=Vt.get(e);if(t!==void 0)return t;let r=xt++;return xt===2147483647&&(xt=0),Vt.set(e,r),r}function $t(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function gt(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function Zt(e){_t.setFloat64(0,e);let t=_t.getInt32(0),r=_t.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function en(e){return gt(e.toString())}function tn(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return ht(e);if(e instanceof Date)return Zt(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+C(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+C(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+$t(C(n),C(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+$t(C(o),gt(s))|0}}return r}function C(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return Zt(e);case"string":return gt(e);case"bigint":return en(e);case"object":return tn(e);case"symbol":return ht(e);case"function":return ht(e);default:return 0}}var P=5,yt=Math.pow(2,P),rn=yt-1,nn=yt/2,sn=yt/4,k=0,U=1,j=2,Z=3,bt={type:j,bitmap:0,array:[]};function xe(e,t){return e>>>t&rn}function Re(e,t){return 1<<xe(e,t)}function on(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function kt(e,t){return on(e&t-1)}function q(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function un(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function wt(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function Qt(e,t,r,n,i,s){let o=C(t);if(o===n)return{type:Z,hash:o,array:[{type:k,k:t,v:r},{type:k,k:i,v:s}]};let u={val:!1};return he(Ot(bt,e,o,t,r,u),e,n,i,s,u)}function he(e,t,r,n,i,s){switch(e.type){case U:return ln(e,t,r,n,i,s);case j:return Ot(e,t,r,n,i,s);case Z:return fn(e,t,r,n,i,s)}}function ln(e,t,r,n,i,s){let o=xe(r,t),u=e.array[o];if(u===void 0)return s.val=!0,{type:U,size:e.size+1,array:q(e.array,o,{type:k,k:n,v:i})};if(u.type===k)return p(n,u.k)?i===u.v?e:{type:U,size:e.size,array:q(e.array,o,{type:k,k:n,v:i})}:(s.val=!0,{type:U,size:e.size,array:q(e.array,o,Qt(t+P,u.k,u.v,r,n,i))});let f=he(u,t+P,r,n,i,s);return f===u?e:{type:U,size:e.size,array:q(e.array,o,f)}}function Ot(e,t,r,n,i,s){let o=Re(r,t),u=kt(e.bitmap,o);if(e.bitmap&o){let f=e.array[u];if(f.type!==k){let h=he(f,t+P,r,n,i,s);return h===f?e:{type:j,bitmap:e.bitmap,array:q(e.array,u,h)}}let a=f.k;return p(n,a)?i===f.v?e:{type:j,bitmap:e.bitmap,array:q(e.array,u,{type:k,k:n,v:i})}:(s.val=!0,{type:j,bitmap:e.bitmap,array:q(e.array,u,Qt(t+P,a,f.v,r,n,i))})}else{let f=e.array.length;if(f>=nn){let a=new Array(32),h=xe(r,t);a[h]=Ot(bt,t+P,r,n,i,s);let S=0,v=e.bitmap;for(let L=0;L<32;L++){if(v&1){let le=e.array[S++];a[L]=le}v=v>>>1}return{type:U,size:f+1,array:a}}else{let a=un(e.array,u,{type:k,k:n,v:i});return s.val=!0,{type:j,bitmap:e.bitmap|o,array:a}}}}function fn(e,t,r,n,i,s){if(r===e.hash){let o=vt(e,n);if(o!==-1)return e.array[o].v===i?e:{type:Z,hash:r,array:q(e.array,o,{type:k,k:n,v:i})};let u=e.array.length;return s.val=!0,{type:Z,hash:r,array:q(e.array,u,{type:k,k:n,v:i})}}return he({type:j,bitmap:Re(e.hash,t),array:[e]},t,r,n,i,s)}function vt(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(p(t,e.array[n].k))return n;return-1}function We(e,t,r,n){switch(e.type){case U:return cn(e,t,r,n);case j:return an(e,t,r,n);case Z:return pn(e,n)}}function cn(e,t,r,n){let i=xe(r,t),s=e.array[i];if(s!==void 0){if(s.type!==k)return We(s,t+P,r,n);if(p(n,s.k))return s}}function an(e,t,r,n){let i=Re(r,t);if(!(e.bitmap&i))return;let s=kt(e.bitmap,i),o=e.array[s];if(o.type!==k)return We(o,t+P,r,n);if(p(n,o.k))return o}function pn(e,t){let r=vt(e,t);if(!(r<0))return e.array[r]}function Lt(e,t,r,n){switch(e.type){case U:return dn(e,t,r,n);case j:return mn(e,t,r,n);case Z:return _n(e,n)}}function dn(e,t,r,n){let i=xe(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===k){if(!p(s.k,n))return e}else if(o=Lt(s,t+P,r,n),o===s)return e;if(o===void 0){if(e.size<=sn){let u=e.array,f=new Array(e.size-1),a=0,h=0,S=0;for(;a<i;){let v=u[a];v!==void 0&&(f[h]=v,S|=1<<a,++h),++a}for(++a;a<u.length;){let v=u[a];v!==void 0&&(f[h]=v,S|=1<<a,++h),++a}return{type:j,bitmap:S,array:f}}return{type:U,size:e.size-1,array:q(e.array,i,o)}}return{type:U,size:e.size,array:q(e.array,i,o)}}function mn(e,t,r,n){let i=Re(r,t);if(!(e.bitmap&i))return e;let s=kt(e.bitmap,i),o=e.array[s];if(o.type!==k){let u=Lt(o,t+P,r,n);return u===o?e:u!==void 0?{type:j,bitmap:e.bitmap,array:q(e.array,s,u)}:e.bitmap===i?void 0:{type:j,bitmap:e.bitmap^i,array:wt(e.array,s)}}return p(n,o.k)?e.bitmap===i?void 0:{type:j,bitmap:e.bitmap^i,array:wt(e.array,s)}:e}function _n(e,t){let r=vt(e,t);if(r<0)return e;if(e.array.length!==1)return{type:Z,hash:e.hash,array:wt(e.array,r)}}function er(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===k){t(s.v,s.k);continue}er(s,t)}}}var _e=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=We(this.root,0,C(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?bt:this.root,s=he(i,0,C(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=Lt(this.root,0,C(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:We(this.root,0,C(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){er(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+$t(C(r),C(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;let r=!0;return this.forEach((n,i)=>{r=r&&p(t.get(i,!n),n)}),r}};function tr(e){if(e==="")return 0;let t=rr(e);if(t){let r=0;for(let n of t)r++;return r}else return e.match(/./gsu).length}function De(e){let t=rr(e);return t?D.fromArray(Array.from(t).map(r=>r.segment)):D.fromArray(e.match(/./gsu))}function rr(e){if(Intl&&Intl.Segmenter)return new Intl.Segmenter().segment(e)[Symbol.iterator]()}function Yt(e,t){return D.fromArray(e.split(t))}function nr(e,t){let r=e[Symbol.iterator](),n=r.next().value||"",i=r.next();for(;!i.done;)n=n+t+i.value,i=r.next();return n}function dt(e){let t="";for(let r of e)t=t+r;return t}function ir(){return _e.new()}function Pe(e){return D.fromArray(e.entries())}function sr(e,t,r){return r.set(e,t)}function ne(){return ir()}function $e(e,t,r){return sr(t,r,e)}function hn(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=d(i,n)}}}function $n(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return hn(n,l([]));{let i=r.head;e=r.tail,t=d(i[0],n)}}}function wn(e){let t=Pe(e);return $n(t,l([]))}function or(e){return wn(e)}function Ge(e){return e[0]}function we(e){return e[1]}function gn(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1))e=r.tail,t=n+1;else return n}}function lr(e){return gn(e,0)}function yn(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=d(i,n)}}}function M(e){return yn(e,l([]))}function bn(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return M(s);{let o=n.head,u=n.tail,f=i(o)?d(o,s):s;e=u,t=i,r=f}}}function K(e,t){return bn(e,t,l([]))}function kn(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return M(s);{let o=n.head,u=n.tail,f=(()=>{let a=i(o);if(a.isOk()){let h=a[0];return d(h,s)}else return s})();e=u,t=i,r=f}}}function Be(e,t){return kn(e,t,l([]))}function On(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return M(s);{let o=n.head;e=n.tail,t=i,r=d(i(o),s)}}}function x(e,t){return On(e,t,l([]))}function vn(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(i.hasLength(0))return M(u);{let f=i.head,a=i.tail,h=d(s(f,o),u);e=a,t=s,r=o+1,n=h}}}function ge(e,t){return vn(e,t,0,l([]))}function fr(e,t){for(;;){let r=e,n=t;if(n<=0)return r;if(r.hasLength(0))return l([]);e=r.tail,t=n-1}}function Ln(e,t,r){for(;;){let n=e,i=t,s=r;if(i<=0)return M(s);if(n.hasLength(0))return M(s);{let u=n.head;e=n.tail,t=i-1,r=d(u,s)}}}function cr(e,t){return Ln(e,t,l([]))}function jn(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=d(i,n)}}}function An(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return M(n);{let i=r.head;e=r.tail,t=jn(i,n)}}}function me(e){return An(e,l([]))}function ie(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return i;{let o=n.head;e=n.tail,t=s(i,o),r=s}}}function ar(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return new _(void 0);{let i=r.head,s=r.tail;if(n(i))return new m(i);e=s,t=n}}}function En(e,t,r){for(;;){let n=e,i=t,s=r,o=Ie(n,i);if(o instanceof F)return d(i,s);o instanceof B?(e=n,t=i+1,r=d(i,s)):(e=n,t=i-1,r=d(i,s))}}function At(e,t){return En(e,t,l([]))}function Et(e){return tr(e)}function qn(e){let r=at(e);return ae(r)}function dr(e,t){return nr(e,t)}function pr(e,t,r){let i=De(e),s=fr(i,t),o=cr(s,r);return qn(o)}function mr(e,t,r){if(r<0)return"";if(t<0){let s=Et(e)+t;return s<0?"":pr(e,s,r)}else return pr(e,t,r)}function Tt(e,t){if(t==="")return De(e);{let n=pt(e),i=Jt(n,t);return x(i,ae)}}function Ct(e,t,r){return e?t:r()}var He=class extends c{constructor(t){super(),this.all=t}};function hr(e){return new He(l([(t,r)=>e(t)]))}function Nt(){return new He(l([]))}var ye=class extends c{constructor(t){super(),this.content=t}},w=class extends c{constructor(t,r,n,i,s,o,u){super(),this.key=t,this.namespace=r,this.tag=n,this.attrs=i,this.children=s,this.self_closing=o,this.void=u}};var be=class extends c{constructor(t,r,n){super(),this[0]=t,this[1]=r,this.as_property=n}},ke=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}};function wr(e,t){return new be(e,pe(t),!1)}function gr(e,t){return new ke("on"+e,t)}function O(e){return wr("class",e)}function yr(e){return wr("class",(()=>{let r=Be(e,n=>n[1]?new m(n[0]):new _(void 0));return dr(r," ")})())}function Je(e,t,r){return e==="area"?new w("","",e,t,l([]),!1,!0):e==="base"?new w("","",e,t,l([]),!1,!0):e==="br"?new w("","",e,t,l([]),!1,!0):e==="col"?new w("","",e,t,l([]),!1,!0):e==="embed"?new w("","",e,t,l([]),!1,!0):e==="hr"?new w("","",e,t,l([]),!1,!0):e==="img"?new w("","",e,t,l([]),!1,!0):e==="input"?new w("","",e,t,l([]),!1,!0):e==="link"?new w("","",e,t,l([]),!1,!0):e==="meta"?new w("","",e,t,l([]),!1,!0):e==="param"?new w("","",e,t,l([]),!1,!0):e==="source"?new w("","",e,t,l([]),!1,!0):e==="track"?new w("","",e,t,l([]),!1,!0):e==="wbr"?new w("","",e,t,l([]),!1,!0):new w("","",e,t,r,!1,!1)}function kr(e){return new ye(e)}var St=class extends c{constructor(t){super(),this.dict=t}};function It(e){return or(e.dict)}var Zn=void 0;function Or(e){let t=ie(e,ne(),(r,n)=>$e(r,n,Zn));return new St(t)}var Ye=class extends c{constructor(t){super(),this[0]=t}},W=class extends c{constructor(t){super(),this[0]=t}};var ee=class extends c{};var Xe=class extends c{constructor(t){super(),this[0]=t}};function Ft(e,t,r,n=!1){let i,s=[{prev:e,next:t,parent:e.parentNode}];for(;s.length;){let{prev:o,next:u,parent:f}=s.pop();if(u.subtree!==void 0&&(u=u.subtree()),u.content!==void 0)if(o)if(o.nodeType===Node.TEXT_NODE)o.textContent!==u.content&&(o.textContent=u.content),i??=o;else{let a=document.createTextNode(u.content);f.replaceChild(a,o),i??=a}else{let a=document.createTextNode(u.content);f.appendChild(a),i??=a}else if(u.tag!==void 0){let a=ti({prev:o,next:u,dispatch:r,stack:s,isComponent:n});o?o!==a&&f.replaceChild(a,o):f.appendChild(a),i??=a}else u.elements!==void 0?Ke(u,a=>{s.unshift({prev:o,next:a,parent:f}),o=o?.nextSibling}):u.subtree!==void 0&&s.push({prev:o,next:u,parent:f})}return i}function ti({prev:e,next:t,dispatch:r,stack:n}){let i=t.namespace||"http://www.w3.org/1999/xhtml",s=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),o=s?e:i?document.createElementNS(i,t.tag):document.createElement(t.tag),u;if(Oe.has(o))u=Oe.get(o);else{let y=new Map;Oe.set(o,y),u=y}let f=s?new Set(u.keys()):null,a=s?new Set(Array.from(e.attributes,y=>y.name)):null,h=null,S=null,v=null;for(let y of t.attrs){let $=y[0],E=y[1];if(y.as_property)o[$]!==E&&(o[$]=E),s&&a.delete($);else if($.startsWith("on")){let Y=$.slice(2),ut=r(E);u.has(Y)||o.addEventListener(Y,ve),u.set(Y,ut),s&&f.delete(Y)}else if($.startsWith("data-lustre-on-")){let Y=$.slice(15),ut=r(ri);u.has(Y)||o.addEventListener(Y,ve),u.set(Y,ut),o.setAttribute($,E)}else $==="class"?h=h===null?E:h+" "+E:$==="style"?S=S===null?E:S+E:$==="dangerous-unescaped-html"?v=E:(typeof E=="string"&&o.setAttribute($,E),($==="value"||$==="selected")&&(o[$]=E),s&&a.delete($))}if(h!==null&&(o.setAttribute("class",h),s&&a.delete("class")),S!==null&&(o.setAttribute("style",S),s&&a.delete("style")),s){for(let y of a)o.removeAttribute(y);for(let y of f)u.delete(y),o.removeEventListener(y,ve)}if(t.key!==void 0&&t.key!=="")o.setAttribute("data-lustre-key",t.key);else if(v!==null)return o.innerHTML=v,o;let L=o.firstChild,le=null,Ut=null,Pt=null,ot=t.children[Symbol.iterator]().next().value;s&&ot!==void 0&&ot.key!==void 0&&ot.key!==""&&(le=new Set,Ut=Lr(e),Pt=Lr(t));for(let y of t.children)Ke(y,$=>{$.key!==void 0&&le!==null?L=ni(L,$,o,n,Pt,Ut,le):(n.unshift({prev:L,next:$,parent:o}),L=L?.nextSibling)});for(;L;){let y=L.nextSibling;o.removeChild(L),L=y}return o}var Oe=new WeakMap;function ve(e){let t=e.currentTarget;if(!Oe.has(t)){t.removeEventListener(e.type,ve);return}let r=Oe.get(t);if(!r.has(e.type)){t.removeEventListener(e.type,ve);return}r.get(e.type)(e)}function ri(e){let t=e.target,r=t.getAttribute(`data-lustre-on-${e.type}`),n=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),i=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":i.push("target.value");break}return{tag:r,data:i.reduce((s,o)=>{let u=o.split(".");for(let f=0,a=s,h=e;f<u.length;f++)f===u.length-1?a[u[f]]=h[u[f]]:(a[u[f]]??={},h=h[u[f]],a=a[u[f]]);return s},{data:n})}}function Lr(e){let t=new Map;if(e)for(let r of e.children)Ke(r,n=>{let i=n?.key||n?.getAttribute?.("data-lustre-key");i&&t.set(i,n)});return t}function ni(e,t,r,n,i,s,o){for(;e&&!i.has(e.getAttribute("data-lustre-key"));){let f=e.nextSibling;r.removeChild(e),e=f}if(s.size===0)return Ke(t,f=>{n.unshift({prev:e,next:f,parent:r}),e=e?.nextSibling}),e;if(o.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),n.unshift({prev:null,next:t,parent:r}),e;o.add(t.key);let u=s.get(t.key);if(!u&&!e)return n.unshift({prev:null,next:t,parent:r}),e;if(!u&&e!==null){let f=document.createTextNode("");return r.insertBefore(f,e),n.unshift({prev:f,next:t,parent:r}),e}return!u||u===e?(n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e):(r.insertBefore(u,e),n.unshift({prev:u,next:t,parent:r}),e)}function Ke(e,t){if(e.elements!==void 0)for(let r of e.elements)t(r);else t(e)}var Ve=class e{#e=null;#r=[];#t=[];#i=!1;#o=!1;#n=null;#u=null;#s=null;static start(t,r,n,i,s){if(!Ze())return new _(new se);let o=r instanceof HTMLElement?r:document.querySelector(r);if(!o)return new _(new Qe(r));let u=new e(n(t),i,s,o);return new m(f=>u.send(f))}constructor([t,r],n,i,s=document.body,o=!1){this.#n=t,this.#u=n,this.#s=i,this.#e=s,this.#t=r.all.toArray(),this.#i=!0,this.#o=o,window.requestAnimationFrame(()=>this.#l())}send(t){switch(!0){case t instanceof W:{this.#r.push(t[0]),this.#l();return}case t instanceof ee:{this.#a();return}case t instanceof Ye:{this.#c(t[0]);return}default:return}}emit(t,r){this.#e.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:r,composed:!0}))}#l(){this.#f();let t=this.#s(this.#n),r=n=>i=>{let s=n(i);s instanceof m&&this.send(new W(s[0]))};this.#i=!1,this.#e=Ft(this.#e,t,r,this.#o)}#f(t=0){for(;this.#r.length;){let[r,n]=this.#u(this.#n,this.#r.shift());this.#i||=!p(this.#n,r),this.#n=r,this.#t=this.#t.concat(n.all.toArray())}for(;this.#t.length;)this.#t.shift()(r=>this.send(new W(r)),(r,n)=>this.emit(r,n));this.#r.length&&(t<5?this.#f(++t):window.requestAnimationFrame(()=>this.#l()))}#c(t){switch(!0){case t instanceof Xe:{let r=this.#s(t[0]),n=i=>s=>{let o=i(s);o instanceof m&&this.send(new W(o[0]))};this.#r=[],this.#t=[],this.#i=!1,this.#e=Ft(this.#e,r,n,this.#o)}}}#a(){this.#e.remove(),this.#e=null,this.#n=null,this.#r=[],this.#t=[],this.#i=!1,this.#u=()=>{},this.#s=()=>{}}},jr=(e,t,r)=>Ve.start(r,t,e.init,e.update,e.view),Ze=()=>window&&window.document;var Bt=class extends c{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.on_attribute_change=i}};var Qe=class extends c{constructor(t){super(),this.selector=t}},se=class extends c{};function Ar(e,t,r){return new Bt(e,t,r,new I)}function Er(e,t,r){return Ct(!Ze(),new _(new se),()=>jr(e,t,r))}function G(e){return kr(e)}function A(e,t){return Je("div",e,t)}function H(e,t){return Je("button",e,t)}function si(e,t){return gr(e,t)}function J(e){return si("click",t=>new m(e))}var g=class extends c{},N=class extends c{};var et=class extends c{constructor(t,r,n,i,s){super(),this.x_min=t,this.y_min=r,this.x_max=n,this.y_max=i,this.cell_size=s}},tt=class extends c{constructor(t,r,n,i){super(),this.universe=t,this.examples=r,this.view_port=n,this.running=i}},rt=class extends c{},Le=class extends c{},nt=class extends c{constructor(t){super(),this[0]=t}},je=class extends c{},oe=class extends c{constructor(t){super(),this[0]=t}},Ae=class extends c{},Ee=class extends c{},Te=class extends c{},Ce=class extends c{};function Mt(e){return x(e,t=>[t,new g])}function ui(){return Mt(l([[1,1],[2,1],[3,1]]))}function li(){return Mt(l([[2,0],[0,1],[2,1],[1,2],[2,2]]))}function fi(){return Mt(l([[4,2],[5,2],[6,2],[10,2],[11,2],[12,2],[2,4],[7,4],[9,4],[14,4],[2,5],[7,5],[9,5],[14,5],[2,6],[7,6],[9,6],[14,6],[4,7],[5,7],[6,7],[10,7],[11,7],[12,7],[4,9],[5,9],[6,9],[10,9],[11,9],[12,9],[2,10],[7,10],[9,10],[14,10],[2,11],[7,11],[9,11],[14,11],[2,12],[7,12],[9,12],[14,12],[4,14],[5,14],[6,14],[10,14],[11,14],[12,14]]))}function ci(e,t,r){return r==="O"?[[e,t],new g]:[[e,t],new N]}function ai(e,t,r){for(;;){let n=e,i=t,s=r;if(i<0)return s;e=n,t=i-1,r=d(mr(n,i,1),s)}}function pi(e){return ai(e,Et(e),l([]))}function di(e,t){let r=pi(e);return ge(r,(n,i)=>ci(t,i,n))}function Dt(e){let r=Tt(e,`
`),n=ge(r,di);return me(n)}function mi(){return Dt(`
........................O...........
......................O.O...........
............OO......OO............OO
...........O...O....OO............OO
OO........O.....O...OO..............
OO........O...O.OO....O.O...........
..........O.....O.......O...........
...........O...O....................
............OO......................
`)}function _i(){return Dt(`
OO.........OO
OOOO.O.....OO
O.O..OOO
...........O
....OO....O.O
....O.....O..O....O
...........OO....OO

...............OOO..O.O
..........OO.....O.OOOO
..........OO.........OO
`)}function xi(){return Dt(`
OOO

.O
.O
.O
`)}function qr(){return l([["Blinker",ui()],["Space ship",li()],["Pulsar",fi()],["Glider",mi()],["Bakers dozen",_i()],["Thunderbird",xi()]])}function Nr(e,t){window.setInterval(t,e)}var ue=class extends c{},it=class extends c{},z=class extends c{};function st(e){let r=K(e,n=>p(n,new g));return lr(r)}function $i(e,t){if(e instanceof g){let r=st(t);if(r<2){let n=r;return new ue}else return new z}else return new z}function wi(e,t){if(e instanceof g){let r=st(t);if(r===2||r===3){let n=r;return new z}else return new ue}else return new z}function gi(e,t){if(e instanceof g){let r=st(t);if(r>3){let n=r;return new ue}else return new z}else return new z}function yi(e,t){if(e instanceof g)return new z;{let r=st(t);if(r===3){let n=r;return new it}else return new z}}function bi(e,t){let r=(()=>{let n=l([$i,wi,gi,yi]),i=x(n,s=>s(e,t));return K(i,s=>!p(s,new z))})();return r.hasLength(0)?new z:r.head}function zr(e,t){let r=bi(e,t);return r instanceof ue?new N:r instanceof it?new g:e}function Oi(e,t){let r=(s,o)=>{let u=s[0],f=s[1],a=o[0],h=o[1];return Se(u-a)<=1&&Se(f-h)<=1&&!p(s,o)},i=K(e,s=>r(t,Ge(s)));return x(i,we)}function vi(e,t){let r=t[0],n=t[1],i=Oi(e,r);return[r,zr(n,i)]}function Li(e,t){let r=i=>{let s=i[0];return p(s,t)},n=K(e,r);if(n.hasLength(0))return new I;{let i=n.head;return new T(i)}}function qe(e,t){let r=Li(e,t);return r instanceof T?r[0]:[t,new N]}function ji(e){let t=x(e,Ge),r=(()=>{let i=Or(t);return It(i)})();return x(r,n=>qe(e,n))}function Sr(e){let t=o=>{let u=o[0],f=o[1];return l([[u-1,f-1],[u,f-1],[u+1,f-1],[u-1,f],[u+1,f],[u-1,f+1],[u,f+1],[u+1,f+1]])},r=o=>x(t(o),u=>qe(e,u)),i=(()=>{let u=x(e,Ge),f=x(u,r),a=me(f);return ji(a)})(),s=x(i,o=>vi(e,o));return K(s,o=>p(we(o),new g))}function Ir(e,t){let r=(()=>{let n=qe(e,t);return n[1]instanceof N?[n[0],new g]:[n[0],new N]})();return d(r,K(e,i=>{if(p(i[0],t)){let s=i[0];return!1}else return!0}))}function Ei(e,t){let r=At(e.x_min,e.x_max),n=x(r,i=>[i,e.y_min]);return x(n,i=>qe(t,i))}function Ti(e,t){let r=t[0],n=t[1];return H(l([J(new oe(r)),yr(l([["flex w-4 h-4 sm:w-6 sm:h-6 border-gray-400 m-[1px]",!0],["bg-alive",p(n,new g)],["bg-dead",p(n,new N)]]))]),l([]))}function Ci(e,t){let r=Ei(e,t);return A(l([O("flex")]),x(r,n=>Ti(e.cell_size,n)))}function Fr(e,t){let r=At(e.y_min,e.y_max),i=x(r,o=>e.withFields({y_min:o,y_max:o})),s=x(i,o=>Ci(o,t));return A(l([]),s)}function qi(){return A(l([O("bg-gleam p-8 flex justify-center text-2xl leading-xl")]),l([G("Gleam Of Life")]))}function Ni(e){let t=e.running?"\u23F8\uFE0F":"\u25B6\uFE0F",r=x(e.examples,n=>{let i=n[0];return H(l([J(new nt(i))]),l([G(i)]))});return A(l([O("bg-gleamGray w-screen h-full")]),l([qi(),A(l([O("flex flex-col justify-center items-center h-full gap-4")]),l([A(l([]),l([H(l([O("text-5xl text-gleam"),J(new je)]),l([G(t)]))])),A(l([]),l([H(l([O("text-5xl text-gleam"),J(new Ce)]),l([G("\u2B06\uFE0F")]))])),A(l([O("flex gap-2")]),l([H(l([O("text-5xl text-gleam"),J(new Ae)]),l([G("\u2B05\uFE0F")])),Fr(e.view_port,e.universe),H(l([O("text-5xl text-gleam"),J(new Ee)]),l([G("\u27A1\uFE0F")]))])),A(l([]),l([H(l([O("text-5xl text-gleam"),J(new Te)]),l([G("\u2B07\uFE0F")]))]))])),A(l([O("p-4 text-gleam flex flex-col gap-2 items-center")]),l([G("Load a different model"),A(l([O("flex gap-3 justify-center")]),r)]))]))}function zi(e,t){return[(()=>{if(t instanceof rt)return e;if(t instanceof Le)return e.running?e.withFields({universe:Sr(e.universe)}):e;if(t instanceof Ae)return e.withFields({view_port:e.view_port.withFields({x_min:e.view_port.x_min-1,x_max:e.view_port.x_max-1})});if(t instanceof Ee)return e.withFields({view_port:e.view_port.withFields({x_min:e.view_port.x_min+1,x_max:e.view_port.x_max+1})});if(t instanceof Ce)return e.withFields({view_port:e.view_port.withFields({y_min:e.view_port.y_min-1,y_max:e.view_port.y_max-1})});if(t instanceof Te)return e.withFields({view_port:e.view_port.withFields({y_min:e.view_port.y_min+1,y_max:e.view_port.y_max+1})});if(t instanceof oe){let n=t[0];return e.withFields({universe:Ir(e.universe,n)})}else{if(t instanceof je)return e.withFields({running:!e.running});{let n=t[0],i=(()=>{let s=ar(e.examples,u=>{if(u[0]===n){let f=u[0];return!0}else return!1}),o=Ht(s,["",e.universe]);return we(o)})();return e.withFields({universe:i})}}})(),Nt()]}function Si(e,t){return hr(r=>Nr(e,()=>r(t)))}function Ii(e){let t=qr();if(!t.atLeastLength(1))throw ze("assignment_no_match","game_of_rps",22,"init","Assignment pattern did not match",{value:t});let r=t.head[1];return[new tt(r,t,new et(0,0,18,18,35),!0),Si(250,new Le)]}function Br(){let e=Ar(Ii,zi,Ni),t=Er(e,"#app",void 0);if(!t.isOk())throw ze("assignment_no_match","game_of_rps",156,"main","Assignment pattern did not match",{value:t})}Br();
